<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sora Metrics Dashboard</title>
  <link rel="stylesheet" href="dashboard.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">Sora Metrics</div>
    <div class="actions">
      <div class="user-picker">
        <input id="search" type="search" placeholder="Type to find user…" autocomplete="off" />
        <div id="suggestions" class="suggestions"></div>
      </div>
      <select id="userSelect" title="All users"></select>
      <button id="refresh">Refresh</button>
      <button id="export">Export CSV</button>
      <button id="resetZoom" title="Reset zoom to fit">Reset Zoom</button>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar">
      <h3>Posts</h3>
      <div class="list-actions">
        <button id="showAll" title="Show all posts">Show All</button>
        <button id="hideAll" title="Hide all posts">Hide All</button>
      </div>
      <div id="posts" class="posts"></div>
    </aside>
    <section class="content">
      <div class="chart-wrap">
        <canvas id="chart" width="900" height="540"></canvas>
        <div id="tooltip" class="tooltip"></div>
      </div>
      <div id="viewsSummary" class="metric-card" title="Sum of latest views for visible posts">
        <span class="label">Views</span>
        <span id="viewsTotal" class="value">0</span>
      </div>
      <div id="likesSummary" class="metric-card" title="Sum of latest likes for visible posts">
        <span class="label">Likes</span>
        <span id="likesTotal" class="value">0.00</span>
      </div>
      <div id="repliesSummary" class="metric-card" title="Sum of latest replies for visible posts (non-recursive)">
        <span class="label">Replies</span>
        <span id="repliesTotal" class="value">0.00</span>
      </div>
      <div id="remixesSummary" class="metric-card" title="Sum of latest recursive remixes for visible posts">
        <span class="label">Recursive Remixes</span>
        <span id="remixesTotal" class="value">0.00</span>
      </div>
      <div id="interactionsSummary" class="metric-card" title="Sum of latest interactions (likes + comments) for visible posts">
        <span class="label">Interactions</span>
        <span id="interactionsTotal" class="value">0.00</span>
      </div>
      <div class="chart-wrap" style="margin-top:10px">
        <canvas id="viewsChart" width="900" height="540"></canvas>
        <div id="viewsTooltip" class="tooltip"></div>
      </div>
      <h3 class="section-title">All Posts (unfiltered)</h3>
      <div id="allViewsSummary" class="metric-card" title="Sum of latest views across all posts (ignores visibility)">
        <span class="label">Total views</span>
        <span id="allViewsTotal" class="value">0</span>
      </div>
      <div id="allLikesSummary" class="metric-card" title="Sum of latest likes across all posts (ignores visibility)">
        <span class="label">Total likes</span>
        <span id="allLikesTotal" class="value">0.00</span>
      </div>
      <div id="allRepliesSummary" class="metric-card" title="Sum of latest replies across all posts (ignores visibility)">
        <span class="label">Total replies</span>
        <span id="allRepliesTotal" class="value">0.00</span>
      </div>
      <div id="allRemixesSummary" class="metric-card" title="Sum of latest recursive remixes across all posts (ignores visibility)">
        <span class="label">Total recursive remixes</span>
        <span id="allRemixesTotal" class="value">0.00</span>
      </div>
      <div id="allInteractionsSummary" class="metric-card" title="Sum of latest interactions across all posts (ignores visibility)">
        <span class="label">Total interactions</span>
        <span id="allInteractionsTotal" class="value">0.00</span>
      </div>
      <div id="followersSummary" class="metric-card" title="Latest follower count for the selected user">
        <span class="label">Total followers</span>
        <span id="followersTotal" class="value">0</span>
      </div>
      <div class="chart-wrap" style="margin-top:10px">
        <canvas id="followersChart" width="900" height="540"></canvas>
        <div id="followersTooltip" class="tooltip"></div>
      </div>
      <div class="chart-wrap" style="margin-top:10px">
        <canvas id="allViewsChart" width="900" height="540"></canvas>
        <div id="allViewsTooltip" class="tooltip"></div>
      </div>
      
      <div class="help">Y: Interaction rate (%) • X: Unique viewers • Drag to zoom • Hover to focus series • Click point to open post • Toggle visibility in the left list</div>
      <div class="help">Below: Cumulative Views by Time • Y: Views • X: Time • Drag to zoom • Hover to focus series • Click point to open post</div>
      <div class="help">Below: Cumulative Followers by Time • Y: Followers • X: Time • Drag to zoom</div>
    </section>
  </main>

  <script src="dashboard.js"></script>
</body>
</html>
